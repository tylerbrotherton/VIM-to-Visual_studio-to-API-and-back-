#!/bin/bash

mongodb_api_send() {
    local API_KEY="your_mongodb_api_key"
    local PROJECT_ID="your_project_id"

    :%w! "$VIM_BUFFER_FILE"

    curl -X POST "https://data.mongodb-api.com/app/${PROJECT_ID}/endpoint/data/v1/action/insertOne" \
         -H "Content-Type: application/json" \
         -H "Access-Control-Request-Headers: *" \
         -H "api-key: ${API_KEY}" \
         -d "{
             'collection': 'your_collection',
             'database': 'your_database',
             'dataSource': 'your_datasource',
             'document': $(cat $VIM_BUFFER_FILE)
         }"
}
